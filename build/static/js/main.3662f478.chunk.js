(this.webpackJsonplearning=this.webpackJsonplearning||[]).push([[0],{159:function(e,t,a){},163:function(e,t,a){},164:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a(0),c=a.n(r),o=a(21),s=a.n(o),i=a(12),l=a(9),u=a(13),d=a(11),j=a(10),h=a(16),b=a(18),p=a(56),f=a(8),m=a.n(f),O=a(15),g=a(170),x=a(171),v=a(40),k=a.n(v);var w={init:function(){},log:function(e){console.error(e)}};k.a.defaults.baseURL="https://whispering-earth-55841.herokuapp.com/api",k.a.interceptors.response.use(null,(function(e){return e.response&&e.response.status>=400&&e.response.status<500||(w.log(e),b.b.error("An unexpected error occurrred.")),Promise.reject(e)}));var y={get:k.a.get,post:k.a.post,put:k.a.put,delete:k.a.delete,setJwt:function(e){k.a.defaults.headers.common["x-auth-token"]=e}},D="/journals";function S(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return y.get("".concat(D,"?pageNumber=").concat(e,"&pageSize=").concat(t,"&start=").concat(a,"&end=").concat(n))}function C(e,t){return y.get("".concat(D,"/starred?pageNumber=").concat(e,"&pageSize=").concat(t))}function N(e,t){return y.get("".concat(D,"/locked?pageNumber=").concat(e,"&pageSize=").concat(t))}function M(e){return y.get("".concat(D,"/").concat(e))}function L(e){if(e._id){var t=Object(i.a)({},e);return delete t._id,y.put((a=e._id,"".concat(D,"/").concat(a)),t)}var a;return y.post(D,e)}function F(e){return y.delete("".concat(D,"/").concat(e))}function P(e){var t=["January","February","March","April","May","June","July","August","September","October","November","December"][e.getMonth()],a=e.getHours()<10?"0".concat(e.getHours()):e.getHours(),n=e.getMinutes()<10?"0".concat(e.getMinutes()):e.getMinutes();return"".concat(e.getDate()," ").concat(t," ").concat(e.getFullYear(),", ").concat(a,":").concat(n)}var T=a(179),I=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props,t=e.currentPage,a=e.journalsLength,r=e.onChange;return Object(n.jsxs)(T.a,{children:[Object(n.jsxs)(T.a.Prev,{disabled:t<=1,onClick:function(){return r("prev")},children:[Object(n.jsx)("i",{className:"fa fa-chevron-left pr-1","aria-hidden":"true"}),"Previous"]}),Object(n.jsxs)(T.a.Next,{disabled:0===a,onClick:function(){return r("next")},children:["Next ",Object(n.jsx)("i",{className:"fa fa-chevron-right pl-1","aria-hidden":"true"})]})]})}}]),a}(r.Component),E=a(19),_=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={journals:[],currentPage:1,pageSize:20,bool:!1},e.getRequiredJournals=Object(O.a)(m.a.mark((function t(){var a,n,r,c,o;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.state,n=a.currentPage,r=a.pageSize,t.next=3,N(n,r);case 3:return c=t.sent,o=c.data,t.abrupt("return",e.setState({journals:o}));case 6:case"end":return t.stop()}}),t)}))),e.handleMouseEnter=function(e){var t=e.currentTarget,a=t.children[0].className;t.children[0].className="fa fa-lock"===a?"fa fa-unlock-alt":t.children[0].className},e.handleMouseLeave=function(e){var t=e.currentTarget,a=t.children[0].className;t.children[0].className="fa fa-unlock-alt"===a?"fa fa-lock":a},e.handleClick=function(t){t.currentTarget.className="btn btn-success btn-sm",t.currentTarget.children[0].className="fa fa-unlock",e.setState({bool:!0})},e.handleSave=function(){var t=Object(O.a)(m.a.mark((function t(a){var n,r,c;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object(p.a)(e.state.journals),r=n.indexOf(a),n[r]=Object(i.a)({},a),n[r].unlockDate=null,e.setState({journals:n}),(c=a).locked=!1,c.unlockDate=null,t.next=10,L(c);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handlePagination=function(t){var a=e.state,n=a.currentPage,r=a.journals;if("next"===t?n=0!==r.length?n+1:n:n-=1,!(n<1)){e.setState({currentPage:n});e.setState({journals:[]}),console.log(e.state.currentPage)}},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=Object(O.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.getRequiredJournals();case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(e,t){this.state.currentPage!==t.currentPage&&this.getRequiredJournals()}},{key:"render",value:function(){var e=this,t=this.state,a=t.journals,r=t.currentPage;return Object(n.jsx)(c.a.Fragment,{children:Object(n.jsxs)(g.a,{children:[Object(n.jsx)("h1",{children:"Locked Diaries"}),Object(n.jsx)(I,{journalsLength:a.length,currentPage:r,onChange:this.handlePagination}),Object(n.jsxs)(x.a,{size:"sm",children:[Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{className:"d-flex",children:[Object(n.jsx)("th",{className:"col-md-3",children:"Diary"}),Object(n.jsx)("th",{className:"col-md-3",children:"Status"}),Object(n.jsx)("th",{className:"col-md-0"})]})}),Object(n.jsx)("tbody",{children:0!==a.length?a.map((function(t){return Object(n.jsxs)("tr",{className:"d-flex",children:[Object(n.jsx)("td",{className:"col-md-3",children:t.unlockDate?P(new Date(t.date)):Object(n.jsx)(E.b,{className:"font-weight-bold",to:"/journals/".concat(t._id),children:P(new Date(t.date))})}),Object(n.jsx)("td",{className:"col-md-3",children:new Date>new Date(t.unlockDate)?Object(n.jsx)("span",{className:"font-weight-bold text-success",children:"[Unlockable]"}):"Locked until ".concat(P(new Date(t.unlockDate)))}),Object(n.jsx)("td",{className:"col-md-0",children:Object(n.jsx)("button",{disabled:new Date<=new Date(t.unlockDate),onClick:function(a){e.handleClick(a),e.handleSave(t)},onMouseEnter:e.handleMouseEnter,onMouseLeave:e.handleMouseLeave,className:"btn btn-primary btn-sm",children:Object(n.jsx)("i",{className:"fa fa-lock"})})})]},t._id)})):Object(n.jsx)("span",{className:"text-align-center",children:"\u201cA moment lasts all of a second, but the memory lives on forever.\u201d"})})]})]})})}}]),a}(r.Component),J=a(178),q=a(177),A=function(e){var t=e.user;return Object(n.jsxs)(J.a,{bg:"light",expand:"lg",children:[Object(n.jsx)(J.a.Brand,{as:E.b,to:"/",children:"overThinker"}),Object(n.jsx)(J.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(n.jsx)(J.a.Collapse,{id:"basic-navbar-nav",children:Object(n.jsxs)(q.a,{className:"w-100",children:[t&&Object(n.jsxs)(c.a.Fragment,{children:[Object(n.jsx)(q.a.Link,{as:E.c,exact:!0,to:"/journals",children:"Journals"}),Object(n.jsx)(q.a.Link,{as:E.c,exact:!0,to:"/random",children:"random"}),Object(n.jsx)(q.a.Link,{as:E.c,exact:!0,to:"/locked",children:"Locked"}),Object(n.jsx)(q.a.Link,{as:E.c,exact:!0,to:"/logout",children:"Logout"}),Object(n.jsx)(q.a.Link,{as:E.c,exact:!0,to:"/profile",className:"ml-md-auto",children:t?t.name:""})]}),!t&&Object(n.jsxs)(c.a.Fragment,{children:[Object(n.jsx)(q.a.Link,{as:E.c,exact:!0,to:"/register",className:"ml-md-auto",children:"Register"}),Object(n.jsx)(q.a.Link,{as:E.c,exact:!0,to:"/login",children:"Login"})]})]})})]})},R=a(63),U=a.n(R),B=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={journal:{comment:"",date:new Date,starred:!1,locked:!1}},e.handleChange=function(t){var a=Object(i.a)({},e.state.journal);a.comment=t.currentTarget.value,e.setState({journal:a})},e.handleDateChange=function(t){var a=Object(i.a)({},e.state.journal);a.date=t,e.setState({journal:a})},e.handleSave=Object(O.a)(m.a.mark((function t(){var a,n,r,c,o;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.state.journal,n=a.comment,r=a.date,""!==n){t.next=4;break}return t.abrupt("return",b.b.error("Field can't be empty"));case 4:if(r){t.next=6;break}return t.abrupt("return",b.b.error("Invalide date."));case 6:if(a._id?console.log("goooothem, you modified"):console.log("ooh it's new"),!a._id){t.next=13;break}return e.props.onToggleEdit(),e.props.onSave(e.state.journal),t.next=12,L(Object(i.a)({_id:a._id},a));case 12:return t.abrupt("return",t.sent);case 13:return t.next=15,L(e.state.journal);case 15:c=t.sent,o=c.data,e.props.history.push("/journals/".concat(o._id));case 18:case"end":return t.stop()}}),t)}))),e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.props.journal?this.setState({journal:this.props.journal}):console.log("not populated")}},{key:"render",value:function(){var e=this.props.onToggleEdit,t=this.state.journal;return Object(n.jsx)("div",{className:"container",children:Object(n.jsxs)("div",{className:"form-group d-flex flex-column align-items-center m-2",children:[Object(n.jsx)("label",{htmlFor:"form",children:"How was your day?"}),Object(n.jsx)("textarea",{autoFocus:!0,value:t.comment,onChange:this.handleChange,className:"form-control mb-3",id:"form",rows:"10"}),Object(n.jsx)("div",{className:"w-100 mb-2",children:Object(n.jsx)(U.a,{minDate:new Date("1900"),maxDate:new Date("2100"),required:!0,onChange:this.handleDateChange,value:new Date(t.date)})}),Object(n.jsxs)("div",{className:"w-100",children:[Object(n.jsx)("button",{className:"btn btn-primary m-2",onClick:this.handleSave,children:"Save"}),Object(n.jsx)("button",{className:"btn btn-danger m-2",onClick:e,hidden:!t._id,children:"Cancel"})]})]})})}}]),a}(r.Component),H=function(e){return Object(n.jsxs)("div",{className:"container",children:[Object(n.jsx)("h1",{children:"Page Not Found"}),Object(n.jsx)("button",{className:"btn btn-primary",onClick:function(){return e.history.push("/")},children:"Home"})]})},z=a(66),Y=a(172),K=a(174),Z=function(e){var t=e.onToggleEdit,a=e.onDelete,r=e.onToggleModal;return Object(n.jsxs)(K.a,{className:"float-right",children:[Object(n.jsx)(K.a.Toggle,{className:"btn btn-sm",id:"dropdown-basic"}),Object(n.jsxs)(K.a.Menu,{children:[Object(n.jsxs)(K.a.Item,{onClick:t,children:[Object(n.jsx)("i",{className:"col-1 fa fa-pencil","aria-hidden":"true"}),Object(n.jsx)("span",{className:"col-1",children:"Edit"})]}),Object(n.jsxs)(K.a.Item,{onClick:a,children:[Object(n.jsx)("i",{className:"col-1 fa fa-trash","aria-hidden":"true"}),Object(n.jsx)("span",{className:"col-1",children:"Delete"})]}),Object(n.jsxs)(K.a.Item,{onClick:r,children:[Object(n.jsx)("i",{className:"col-1 fa fa-lock","aria-hidden":"true"}),Object(n.jsx)("span",{className:"col-1",children:"Lock"})]})]})]})},G=a(175),W=a(99),Q=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).tomorrow=function(){var e=new Date,t=new Date(e);return t.setDate(t.getDate()+1),t},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props,t=e.showModal,a=e.unlockDate,r=e.onToggleModal,c=e.onDateChange,o=e.onLock;return Object(n.jsxs)(G.a,{show:t,onHide:r,animation:!0,centered:!0,children:[Object(n.jsx)(G.a.Header,{closeButton:!0,children:Object(n.jsx)(G.a.Title,{children:"Specify unlock date"})}),Object(n.jsxs)(G.a.Body,{children:[Object(n.jsx)(U.a,{minDate:this.tomorrow(),maxDate:new Date("2200"),required:!0,value:a,onChange:function(e){return c(e)}}),Object(n.jsx)("p",{children:"You won't be able to unlock this diary before the specified date."})]}),Object(n.jsxs)(G.a.Footer,{children:[Object(n.jsx)(W.a,{variant:"secondary",onClick:r,children:"Close"}),Object(n.jsxs)(W.a,{variant:"primary",onClick:o,children:[Object(n.jsx)("i",{className:"fa fa-lock mr-1","aria-hidden":"true"}),"LOCK!"]})]})]})}}]),a}(r.Component),V=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).handleClose=function(){e.setState({showModal:!1})},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props,t=e.journal,a=e.onStar,r=Object(z.a)(e,["journal","onStar"]);return Object(n.jsxs)("div",{className:"journalCard container my-2 p-3 border rounded",children:[Object(n.jsxs)("p",{children:[Object(n.jsx)(Q,Object(i.a)({},r)),Object(n.jsx)(Y.a,{className:"float-right",children:Object(n.jsx)("i",{onClick:a,className:t.starred?"clickable fa fa-star":"clickable fa fa-star-o","aria-hidden":"true"})}),t.comment]}),Object(n.jsxs)("div",{children:[Object(n.jsx)(Y.a,{children:Object(n.jsx)(E.b,{to:"/journals/".concat(t._id),children:P(new Date(t.date))})}),Object(n.jsx)(Z,Object(i.a)({},r))]})]})}}]),a}(r.Component),X=a(1),$=a.n(X),ee=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={isEdit:!1},e.handleToggleEdit=function(){e.setState({isEdit:!e.state.isEdit})},e}return Object(u.a)(a,[{key:"render",value:function(){return this.state.isEdit?Object(n.jsx)(B,Object(i.a)(Object(i.a)({},this.props),{},{onToggleEdit:this.handleToggleEdit})):Object(n.jsx)(V,Object(i.a)(Object(i.a)({},this.props),{},{onToggleEdit:this.handleToggleEdit}))}}]),a}(r.Component);B.propTypes={journal:$.a.object,onSave:$.a.func,onStar:$.a.func,showModal:$.a.number,onToggleModal:$.a.func,onDateChange:$.a.func,onLock:$.a.func,onDelete:$.a.func};var te=ee,ae=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={unlockDate:null,journal:{},showModal:!1},e.handleDelete=function(){F(e.state.journal._id),b.b.info("Deleted"),e.props.history.replace("/testform")},e.handleStar=Object(O.a)(m.a.mark((function t(){var a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(a=e.state.journal).starred=!a.starred,e.setState({journal:a}),t.next=5,L(a);case 5:case"end":return t.stop()}}),t)}))),e.handleSave=function(t){e.setState({journal:t}),console.log("saved")},e.handleDelete=function(){var t=Object(O.a)(m.a.mark((function t(a){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return b.b.info("Deleted"),e.props.history.replace("/new"),t.next=4,F(a);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleDateChange=function(t){e.setState({unlockDate:t})},e.handleLock=function(){var t=Object(O.a)(m.a.mark((function t(a){var n,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.state.unlockDate){t.next=2;break}return t.abrupt("return",b.b.error("Invalid Date"));case 2:return t.next=4,M(a);case 4:return n=t.sent,(r=n.data).locked=!0,r.unlockDate=e.state.unlockDate,t.next=10,L(r);case 10:e.props.history.replace("/new"),b.b.info("LOCKED"),e.setState({showModal:!1});case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleToggleModal=function(){e.setState({showModal:!e.state.showModal})},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=Object(O.a)(m.a.mark((function e(){var t,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M(this.props.match.params.id);case 3:t=e.sent,a=t.data,this.setState({journal:a}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),this.setState({journal:!1});case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state.journal;return t?Object(n.jsx)(c.a.Fragment,{children:Object(n.jsx)(te,{onToggleModal:this.handleToggleModal,showModal:this.state.showModal,unlockDate:this.state.unlockDate,onLock:function(){return e.handleLock(t._id)},onDateChange:this.handleDateChange,onDelete:function(){return e.handleDelete(t._id)},onStar:function(){return e.handleStar(t)},journal:t,onSave:this.handleSave,url:this.props.match.url})}):(this.props.history.replace("/not-found"),null)}}]),a}(r.Component),ne=a(173),re=a(100),ce=a(76),oe=a.n(ce),se=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props,t=e.filter,a=e.pickedDate,r=e.onChange;return"month"===t?Object(n.jsxs)(c.a.Fragment,{children:[Object(n.jsx)("span",{className:"p-2 clickable",onClick:function(){return r("prev-month")},children:Object(n.jsx)("i",{className:"fa fa-angle-left","aria-hidden":"true"})}),Object(n.jsx)(oe.a,{showLeadingZeros:!0,clearIcon:null,className:"mb-2",maxDetail:"year",minDetail:"decade",value:a,onChange:function(e){return r(e)}}),Object(n.jsx)("span",{className:"p-2 clickable",onClick:function(){return r("next-month")},children:Object(n.jsx)("i",{className:"fa fa-angle-right","aria-hidden":"true"})})]}):"day"===t?Object(n.jsxs)(c.a.Fragment,{children:[Object(n.jsx)("span",{className:"p-2 clickable",onClick:function(){return r("prev-day")},children:Object(n.jsx)("i",{className:"fa fa-angle-left","aria-hidden":"true"})}),Object(n.jsx)(oe.a,{showLeadingZeros:!0,clearIcon:null,className:"mb-2",value:a,onChange:function(e){return r(e)}}),Object(n.jsx)("span",{className:"p-2 clickable",onClick:function(){return r("next-day")},children:Object(n.jsx)("i",{className:"fa fa-angle-right","aria-hidden":"true"})})]}):"starred"===t?null:void 0}}]),a}(r.Component),ie=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"renderInput",value:function(e,t){var a=this.props,r=a.onFilter,o=a.pickedFilter;return Object(n.jsxs)(c.a.Fragment,{children:[Object(n.jsx)("input",{className:"mr-1",type:"radio",name:"sorting",id:e,onChange:function(e){return r(e)},checked:o===e}),Object(n.jsx)("label",{className:"pr-3",htmlFor:e,children:t})]})}},{key:"render",value:function(){return Object(n.jsxs)("div",{children:[Object(n.jsx)("p",{children:"Filter By"}),this.renderInput("day","Day",!0),this.renderInput("month","Month"),this.renderInput("starred","Starred")]})}}]),a}(r.Component),le=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={journals:[],currentPage:1,pageSize:3,pickedFilter:"day",pickedDate:new Date,unlockDate:null,journalShouldLockedId:""},e.getRequiredJournals=Object(O.a)(m.a.mark((function t(){var a,n,r,c,o,s,i,l,u,d,j;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.state,n=a.currentPage,r=a.pageSize,c=a.pickedDate,"starred"!==(o=a.pickedFilter)){t.next=7;break}return t.next=4,C(n,r);case 4:return l=t.sent,u=l.data,t.abrupt("return",e.setState({journals:u}));case 7:return"day"===o?(s=new Date(c.getFullYear(),c.getMonth(),c.getDate()),i=new Date(c.getFullYear(),c.getMonth(),c.getDate()+1)):(s=new Date(c.getFullYear(),c.getMonth()),i=new Date(c.getFullYear(),c.getMonth()+1)),t.next=10,S(n,r,s.getTime(),i.getTime());case 10:d=t.sent,j=d.data,e.setState({journals:j});case 13:case"end":return t.stop()}}),t)}))),e.handleFilter=function(t){var a=t.currentTarget;e.setState({pickedFilter:a.id,currentPage:1,pickedDate:new Date})},e.handlePick=function(t){var a=e.state.pickedDate;"prev-day"===t?a.setDate(a.getDate()-1):"next-day"===t?a.setDate(a.getDate()+1):"prev-month"===t?a.setMonth(a.getMonth()-1):"next-month"===t?a.setMonth(a.getMonth()+1):a=t,e.setState({pickedDate:new Date(a),currentPage:1})},e.handlePagination=function(t){var a=e.state,n=a.currentPage,r=a.journals;"next"===t?n=0!==r.length?n+1:n:n-=1,n<1||e.setState({currentPage:n})},e.handleDelete=function(){var t=Object(O.a)(m.a.mark((function t(a){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,F(a);case 2:return t.next=4,e.getRequiredJournals();case 4:b.b.info("deleted");case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleDateChange=function(t){e.setState({unlockDate:t})},e.handleLock=Object(O.a)(m.a.mark((function t(){var a,n,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.state.journalShouldLockedId,e.state.unlockDate){t.next=3;break}return t.abrupt("return",b.b.error("Invalid Date"));case 3:return t.next=5,M(a);case 5:return n=t.sent,(r=n.data).locked=!0,r.unlockDate=e.state.unlockDate,t.next=11,L(r);case 11:return t.next=13,e.getRequiredJournals();case 13:b.b.info("LOCKED"),e.setState({showModal:!1});case 15:case"end":return t.stop()}}),t)}))),e.handleSave=function(t){if(t){var a=Object(p.a)(e.state.journals),n=a.find((function(e){return e._id===t._id})),r=a.indexOf(n);a[r]=Object(i.a)({},n),a[r]=t,e.setState({journals:a})}},e.handleStar=function(){var t=Object(O.a)(m.a.mark((function t(a){var n,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object(p.a)(e.state.journals),r=n.indexOf(a),n[r].starred=!n[r].starred,e.setState({journals:n}),t.next=6,L(a);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleToggleModal=function(t){e.setState({showModal:!e.state.showModal,journalShouldLockedId:t})},e.handleHideModal=function(){return e.setState({showModal:!1,journalShouldLockedId:""})},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.getRequiredJournals()}},{key:"componentDidUpdate",value:function(e,t){var a=this.state,n=a.pickedFilter,r=a.currentPage,c=a.pickedDate;n===t.pickedFilter&&r===t.currentPage&&c===t.pickedDate||this.getRequiredJournals()}},{key:"render",value:function(){var e=this,t=this.state,a=t.journals,r=t.currentPage,o=t.pickedFilter,s=t.pickedDate;return Object(n.jsx)(c.a.Fragment,{children:Object(n.jsx)(g.a,{className:"mt-2",children:Object(n.jsxs)(ne.a,{children:[Object(n.jsx)(re.a,{children:Object(n.jsxs)("div",{className:"sticky-top p-2",children:[Object(n.jsx)(ie,{onFilter:this.handleFilter,pickedFilter:o}),Object(n.jsx)(se,{filter:o,pickedDate:s,onChange:this.handlePick}),Object(n.jsx)(I,{journalsLength:a.length,currentPage:r,onChange:this.handlePagination}),Object(n.jsx)("span",{className:"sm-quote d-none d-md-block",children:"Worry less. Live more."})]})}),Object(n.jsx)(re.a,{sm:8,children:0!==a.length?a.map((function(t){return Object(n.jsx)(te,{journal:t,showModal:e.state.showModal,unlockDate:e.state.unlockDate,url:e.props.match.url,onToggleModal:function(){return e.handleToggleModal(t._id)},onLock:function(){return e.handleLock(t._id)},onDateChange:e.handleDateChange,onSave:e.handleSave,onDelete:function(){return e.handleDelete(t._id)},onStar:function(){return e.handleStar(t)}},t._id)})):"\u201cJournaling helps you to remember how strong you truly are\n              within yourself.\u201d"})]})})})}}]),a}(r.Component),ue=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=Object(O.a)(m.a.mark((function e(){var t,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.get("".concat(D,"/random"));case 2:t=e.sent,a=t.data,this.props.history.replace("/journals/".concat(a));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return null}}]),a}(r.Component),de=a(101),je="/auth";function he(){return(he=Object(O.a)(m.a.mark((function e(t,a,n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.post("/users",{name:t,email:a,password:n});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function be(){return(be=Object(O.a)(m.a.mark((function e(t,a){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.post(je,{email:t,password:a});case 2:n=e.sent,r=n.data,localStorage.setItem("token",r);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pe(){return localStorage.getItem("token")}y.setJwt(pe());var fe={getJwt:pe,register:function(e,t,a){return he.apply(this,arguments)},login:function(e,t){return be.apply(this,arguments)},logout:function(){localStorage.removeItem("token")},getCurrentUser:function(){try{var e=localStorage.getItem("token");return Object(de.a)(e)}catch(t){return null}}},me=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"componentDidMount",value:function(){fe.logout(),window.location="/"}},{key:"render",value:function(){return null}}]),a}(r.Component),Oe=a(176),ge=a(33),xe=a.n(ge),ve=a(52),ke=a(102),we=function(e){var t=e.name,a=e.label,r=e.value,c=e.error,o=e.onChange,s=e.type,i=void 0===s?"text":s;return Object(n.jsxs)(Oe.a.Group,{controlId:t,children:[Object(n.jsx)(Oe.a.Label,{children:a}),Object(n.jsx)(Oe.a.Control,{name:t,type:i,placeholder:"Enter ".concat(a),value:r,onChange:o}),c&&Object(n.jsx)("div",{className:"alert alert-danger alert-sm",children:c})]})},ye=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(l.a)(this,a);for(var r=arguments.length,c=new Array(r),o=0;o<r;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).state={data:{},errors:{}},e.validate=function(){var t=xe.a.validate(e.state.data,e.schema,{abortEarly:!1}).error;if(!t)return null;var a,n={},r=Object(ke.a)(t.details);try{for(r.s();!(a=r.n()).done;){var c=a.value;n[c.path[0]]=c.message}}catch(o){r.e(o)}finally{r.f()}return n},e.validateProprety=function(t){var a=t.name,n=t.value,r=Object(ve.a)({},a,n),c=Object(ve.a)({},a,e.schema[a]),o=xe.a.validate(r,c).error;return o?o.details[0].message:null},e.handleSubmit=function(t){t.preventDefault();var a=e.validate();e.setState({errors:a||{}}),a||e.doSubmit()},e.handleChange=function(t){var a=t.currentTarget,n=Object(i.a)({},e.state.errors),r=e.validateProprety(a);r?n[a.name]=r:delete n[a.name];var c=Object(i.a)({},e.state.data);c[a.name]=a.value,e.setState({data:c,errors:n})},e.renderInput=function(t,a){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text",c=e.state,o=c.data,s=c.errors;return Object(n.jsx)(we,{type:r,name:t,label:a,value:o[t],onChange:e.handleChange,error:s[t]})},e.renderButton=function(t){return Object(n.jsx)(W.a,{disabled:e.validate(),variant:"primary",type:"submit",children:t})},e}return a}(r.Component),De=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={data:{name:"",email:"",password:""},errors:{}},e.schema={name:xe.a.string().required().max(30).min(3).label("Name"),email:xe.a.string().email().required().label("Email"),password:xe.a.string().required().min(5).label("Password")},e.doSubmit=Object(O.a)(m.a.mark((function t(){var a,n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=e.state.data,t.next=4,fe.register(a.name,a.email,a.password);case 4:b.b.info("User registred with success!!"),b.b.info("You can now login"),e.props.history.push("/login"),t.next=15;break;case 9:t.prev=9,t.t0=t.catch(0),n=Object(i.a)({},e.state.errors),console.log(t.t0.response),n.email=t.t0.response.data,e.setState({errors:n});case 15:case"end":return t.stop()}}),t,null,[[0,9]])}))),e}return Object(u.a)(a,[{key:"render",value:function(){return Object(n.jsx)(g.a,{children:Object(n.jsxs)(Oe.a,{className:"col-md-3 mt-4 ml-auto mr-auto",onSubmit:this.handleSubmit,children:[this.renderInput("name","Name","text"),this.renderInput("email","Email","email"),this.renderInput("password","Password","password"),this.renderButton("Register")]})})}}]),a}(ye),Se=function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={data:{email:"",password:""},errors:{}},e.schema={email:xe.a.string().email().required().label("Email"),password:xe.a.string().required().label("Password")},e.doSubmit=Object(O.a)(m.a.mark((function t(){var a,n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=e.state.data,t.next=4,fe.login(a.email,a.password);case 4:window.location="/",t.next=13;break;case 7:t.prev=7,t.t0=t.catch(0),n=Object(i.a)({},e.state.errors),console.log(t.t0.response),n.email=t.t0.response.data,e.setState({errors:n});case 13:case"end":return t.stop()}}),t,null,[[0,7]])}))),e}return Object(u.a)(a,[{key:"render",value:function(){var e=this.state;e.data,e.errors;return Object(n.jsx)(g.a,{children:Object(n.jsxs)(Oe.a,{className:"col-md-3 mt-4 ml-auto mr-auto",onSubmit:this.handleSubmit,children:[this.renderInput("email","Email","email"),this.renderInput("password","Password","password"),this.renderButton("Login")]})})}}]),a}(ye),Ce=function(e){var t=e.component,a=e.render,r=Object(z.a)(e,["component","render"]);return Object(n.jsx)(h.b,Object(i.a)(Object(i.a)({},r),{},{render:function(e){return fe.getCurrentUser()?t?Object(n.jsx)(t,Object(i.a)({},e)):a(e):Object(n.jsx)(h.a,{to:"/login"})}}))},Ne=(a(159),a(160),function(e){Object(d.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=fe.getCurrentUser();this.setState({user:e})}},{key:"render",value:function(){var e=this.state.user;return console.log("let's do it"),Object(n.jsxs)("div",{children:[Object(n.jsx)(A,{user:e}),Object(n.jsx)(b.a,{position:"bottom-center",autoClose:3e3,pauseOnHover:!1,pauseOnFocusLoss:!1}),Object(n.jsxs)(h.d,{children:[Object(n.jsx)(Ce,{path:"/journals/:id",component:ae}),Object(n.jsx)(Ce,{path:"/journals",component:le}),Object(n.jsx)(Ce,{path:"/random",component:ue}),Object(n.jsx)(Ce,{path:"/new",component:B}),Object(n.jsx)(h.b,{path:"/login",render:function(e){return fe.getCurrentUser()?Object(n.jsx)(h.a,{to:"/new"}):Object(n.jsx)(Se,{})}}),Object(n.jsx)(h.b,{path:"/logout",component:me}),Object(n.jsx)(h.b,{path:"/register",render:function(e){return fe.getCurrentUser()?Object(n.jsx)(h.a,{to:"/new"}):Object(n.jsx)(De,Object(i.a)({},e))}}),Object(n.jsx)(h.b,{path:"/not-found",component:H}),Object(n.jsx)(Ce,{path:"/locked",component:_}),Object(n.jsx)(h.a,{from:"/",exact:!0,to:"/new"}),Object(n.jsx)(h.a,{to:"/not-found"})]})]})}}]),a}(r.Component)),Me=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,180)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,c=t.getLCP,o=t.getTTFB;a(e),n(e),r(e),c(e),o(e)}))};a(161),a(162),a(163);s.a.render(Object(n.jsx)(c.a.StrictMode,{children:Object(n.jsx)(E.a,{children:Object(n.jsx)(Ne,{})})}),document.getElementById("root")),Me()}},[[164,1,2]]]);
//# sourceMappingURL=main.3662f478.chunk.js.map